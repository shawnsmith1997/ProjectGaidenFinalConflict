<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.isMovable = false;
//This is the menu object for (Attack, magic, items, stay)
//How fast the menu animates.
AllowInteraction = true;
image_speed = .0625;

//These are the 4 menu slot sprites (Left and Right are used for yes / no menu)
MenuTopVar = RaiseMenuSprite;
MenuLeftVar = JoinMenuSprite;
MenuRightVar = UseMenuSprite;
MenuBottomVar = GiveMenuSprite;

//These are the names of the Menu slots and are displayed when hovering over said slot.
MenuTopName = 'CHURCH';
MenuLeftName = 'JOIN';
MenuRightName = 'USE';
MenuBottomName = 'GIVE';

//These animate the menu when selected. 0 for not animated, -1 for animated.
MenuAnimTop = 0;
MenuAnimBottom = 0;
MenuAnimLeft = 0;
MenuAnimRight = 0;

//The X and Y pans of the menu (For sliding)
MenuPanX = 0;
MenuPanY = 0;

PanDirection = 'none';

PerformEvent = 'none'; //What event do we perform? This is set when selecting or backing out.

DialogueState = 0;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>global.isMovable = true;
global.StartBarracks = 1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(PanDirection != 'none'){
//This slides the menu in/out.
    //Panning in
    if(PanDirection = 'up'){
        MenuPanY -= 25;
        if(MenuPanY &lt;= 0){
            MenuPanY = 0;
            PanDirection = 'none';
            AllowInteraction = true;
            event_perform(ev_other,ev_user0);
        }
    }
    
    if(PanDirection = 'left'){
        MenuPanX -= 25;
        if(MenuPanX &lt;= 0){
            MenuPanX = 0;
            PanDirection = 'none';
            AllowInteraction = true;
            event_perform(ev_other,ev_user0);
        }
    }
    
    //Panning out
    if(PanDirection = 'down'){
        MenuPanY += 18;
        if(MenuPanY &gt;= 100){
            MenuPanY = 100;
            PanDirection = 'none';
            event_perform(ev_other,ev_user0);
        }
    }
    
    if(PanDirection = 'right'){
        MenuPanX += 25;
        if(MenuPanX &gt;= 200){
            MenuPanX = 200;
            PanDirection = 'none';
            event_perform(ev_other,ev_user0);
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Key Event Listeners
if(AllowInteraction){
    //Select
    if (keyboard_check_pressed(global.SelectButton)){
        //We selected 'Raise'
        if(MenuAnimTop = -1){
            //AllowInteraction = false;
            DialogueState = 0;
            PerformEvent = 'Top';
            event_perform(ev_other,ev_user15);
        }
        //We selected 'Promo'
        else if(MenuAnimLeft = -1){
            sound_play(MenuPanSound);
            DialogueState = 0;
            PerformEvent = 'Left'
            PanDirection = 'right';
            event_perform(ev_other,ev_user15);
        }
        //We selected 'Cure'
        else if(MenuAnimRight = -1){
            AllowInteraction = false;
            DialogueState = 0;
            PerformEvent = 'Right';
            event_perform(ev_other,ev_user15);
        }
        //We selected 'Save'
        else if(MenuAnimBottom = -1){
            AllowInteraction = false;
            DialogueState = 0;
            PerformEvent = 'Bottom';
            event_perform(ev_other,ev_user15);
        }
    }
    
    //Back
    if (keyboard_check_pressed(global.BackButton)){
        sound_play(MenuPanSound);
        PerformEvent = 'BackOut';
        AllowInteraction = false;
        PanDirection = 'down';
    }
    
    //Left
    if (keyboard_check_pressed(global.LeftButton)){
        MenuAnimTop = 0;
        MenuAnimBottom = 0;
        MenuAnimLeft = -1;
        MenuAnimRight = 0;
        sound_play(MenuMoveSound);
    }
    
    //Right
    if (keyboard_check_pressed(global.RightButton)){
        MenuAnimTop = 0;
        MenuAnimBottom = 0;
        MenuAnimLeft = 0;
        MenuAnimRight = -1;
        sound_play(MenuMoveSound);
    }
    
    //Up
    if (keyboard_check_pressed(global.UpButton)){
        MenuAnimTop = -1;
        MenuAnimBottom = 0;
        MenuAnimLeft = 0;
        MenuAnimRight = 0;
        sound_play(MenuMoveSound);
    }
    
    //Down
    if (keyboard_check_pressed(global.DownButton)){
        MenuAnimTop = 0;
        MenuAnimBottom = -1;
        MenuAnimLeft = 0;
        MenuAnimRight = 0;
        sound_play(MenuMoveSound);
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="25">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if(PerformEvent = 'Left'){//Join
    if(DialogueState = 0){   
        //if(global.ForceMembers &gt; 12){
            //CreateDialogueBasic(0,0,"Who would you like to join?",HQMenuController,true);
            //DialogueState =2;
        //}
        if(global.ForceMembers &lt; 12){
            CreateDialogueBasic(0,0,WordWrap("You do not have enough party members!",200 ,'#',false),HQMenuController,true);
            DialogueState =2;
        }
        else{
            DialogueState =3;
        }
        
    }
    //else if(DialogueState = 1){
        //DelayDialogue(20);
        //DialogueState +=1;
    //}
    else if(DialogueState = 2){
        DialogueState +=1;
        PanOutDialogueBasic();
        instance_destroy();
        instance_create(0,0,HQMenuController);
    }

    else if(DialogueState = 3){
        instance_destroy();
        instance_create(0,0,HQMenuController);
        PerformEvent = 'none';
        AllowInteraction = true;
        //if(global.ForceMembers &gt; 12){
            //room_goto(BarracksTown);
//PerformEvent = 'Left';
        //}

        instance_destroy();
        instance_create(0,0,HQMenuController);
        PerformEvent = 'none';
        AllowInteraction = true;
        if(global.ForceMembers &gt; 12){
            room_goto(BarracksTown);
            PerformEvent = 'Left';
        } 

    }
}
else if(PerformEvent = 'Right'){//Cure
AllowInteraction = true;
instance_destroy();
instance_create(0,0,MemberListControler);
    MemberListControler.PanDirection = 'in';
    MemberListControler.CurrentObject = self.id;
    MemberListControler.SubDisplay = 'Item';
    MemberListControler.Event = 'Use';
    sound_play(MenuPanSound);
global.isMovable = false;
/*
    if(DialogueState = 0){
        CreateDialogueBasic(0,0,"Nobody needs to be cured!",HQMenuController,true);
        DialogueState =2;
    }
    else if(DialogueState = 1){
        DelayDialogue(20);
        DialogueState +=1;
    }
    else if(DialogueState = 2){
        DialogueState +=1;
        PanOutDialogueBasic();
    }
    else if(DialogueState = 3){
        instance_destroy();
        instance_create(0,0,HQMenuController);
        PerformEvent = 'none';
        AllowInteraction = true;
    }
*/
}
else if(PerformEvent = 'Bottom'){//Give
AllowInteraction = true;
instance_destroy();
instance_create(0,0,MemberListControler);
    MemberListControler.PanDirection = 'in';
    MemberListControler.CurrentObject = self.id;
    MemberListControler.SubDisplay = 'Item';
    MemberListControler.Event = 'Give';
    sound_play(MenuPanSound);
global.isMovable = false;
/*
    if(DialogueState = 0){
        CreateDialogueBasic(0,0,"File Saved!",HQMenuController,true);
        DialogueState +=2;
    }
    else if(DialogueState = 1){
        DelayDialogue(20);
        DialogueState +=1;
    }
    else if(DialogueState = 2){
        DialogueState +=1;
        PanOutDialogueBasic();
    }
    else if(DialogueState = 3){
        instance_destroy();
        SavingGameScript();
        PerformEvent = 'none';
        AllowInteraction = true;
    }
*/
}

else if(PerformEvent = 'Top'){//Raise
        instance_create(0,0,PriestMenuController);
        PerformEvent = 'Top';
        AllowInteraction = true;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>HQMenuController</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//if we are panning out, what do we do next?

if(PerformEvent = 'BackOut'){//Previous Menu (or go back to whatever)
    //destroy this controler
    instance_destroy();//destroy this menu object
}
else if(PerformEvent = 'Top'){//Church
    instance_create(0,0,PriestMenuController);
    with(PriestMenuController){
                MenuAnimTop = -1;
                sound_play(MenuPanSound);
                MenuPanY = 100//Start at the bottom.
                PanDirection = 'up';
                AllowInteraction = false;
                PerformEvent = 'none';
    }
    instance_destroy();
}
else if(PerformEvent = 'Left'){//Join
    if(global.ForceMembers &gt; 12){
        global.StartBarracks = 1
        room_goto(BarracksTown);
    }
}
else if(PerformEvent = 'Right'){//CURE
    
}
else if(PerformEvent = 'Bottom'){//SAVE

}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Draws the menu
draw_set_font(MenuFont); 
draw_set_color(c_white);
draw_sprite(MenuTopVar,MenuAnimTop,view_xview+120+MenuPanX,view_yview+200+MenuPanY);
draw_sprite(MenuLeftVar,MenuAnimLeft,view_xview+96+MenuPanX,view_yview+212+MenuPanY);
draw_sprite(MenuRightVar,MenuAnimRight,view_xview+144+MenuPanX,view_yview+212+MenuPanY);
draw_sprite(MenuBottomVar,MenuAnimBottom,view_xview+120+MenuPanX,view_yview+224+MenuPanY);
draw_sprite(MenuNameSprite,0,view_xview+180+MenuPanX,view_yview+222+MenuPanY);

draw_set_halign(fa_left);
if(MenuAnimTop = -1){
    draw_text(view_xview + 186+MenuPanX, view_yview + 219+MenuPanY, string(MenuTopName));
}
if(MenuAnimLeft = -1){
    draw_text(view_xview + 186+MenuPanX, view_yview + 219+MenuPanY, string(MenuLeftName));
}
if(MenuAnimRight = -1){
    draw_text(view_xview + 186+MenuPanX, view_yview + 219+MenuPanY, string(MenuRightName));
}
if(MenuAnimBottom = -1){
    draw_text(view_xview + 186+MenuPanX, view_yview + 219+MenuPanY, string(MenuBottomName));
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
